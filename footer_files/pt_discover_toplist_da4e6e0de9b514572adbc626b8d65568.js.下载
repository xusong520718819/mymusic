(function(){var c2x=NEJ.P,bc2x=NEJ.O,bs2x=NEJ.F,a1x=c2x("nej.e"),h2x=c2x("nej.v"),H2x=c2x("nej.ut"),k2x=c2x("nej.u"),bb2x=c2x("nej.ui"),l2x=c2x("nm.x"),q2x=c2x("nm.d"),x2x=c2x("nm.w"),dA4E=c2x("nm.i"),b2x;var RES_KEY_REG=/^track_(playlist|album|artist_top|program|day|listen_record)-*(\d*)$/;x2x.AM1x=NEJ.C();b2x=x2x.AM1x.M2x(bb2x.ep4t);b2x.ce3x=function(){this.cb3x="m-wgt-song-box"};b2x.bX3x=function(){this.ch3x();var j2x=a1x.E2x(this.o2x,"j-flag");this.cj3x={limit:1e3,parent:j2x[0],onbeforelistload:this.ro9f.f2x(this),onemptylist:this.rv9m.f2x(this),onafterlistrender:this.xb0x.f2x(this)}};b2x.bo2x=function(e2x){this.bp2x(e2x);this.o2x.setAttribute("oncopy","return false;");this.o2x.setAttribute("oncut","return false;");this.o2x.setAttribute("ondragstart","return false;");this.bY3x([[this.o2x,"click",this.bS3x.f2x(this)],[window,"playchange",this.hD5I.f2x(this)]]);var bw2x=k2x.gY5d(location.search.slice(1)),uv0x=bw2x["_hash"];if(uv0x&&/^songlist-(\d+)$/.test(uv0x)){this.bdH0x=RegExp.$1}if(e2x.limit>0)this.cj3x.limit=e2x.limit;this.cj3x.item={klass:e2x.tpl||"m-wgt-song-list",canDel:e2x.canDel,type:e2x.type,disable:this.bqt3x,songAlia:l2x.bpp3x,dur2time:l2x.lO6I,getArtistName:l2x.sM9D,isPlaying:this.bqr3x,extData:e2x.extData,soil:l2x.bpF3x};this.cj3x.cache={clear:true,klass:q2x.uP0x,lkey:e2x.key,data:e2x.data};this.cj3x.item.from=this.bMb8T();this.cj3x.item.getFrom=this.bMb8T.f2x(this);if(this.dR4V){this.dR4V.V2x()}this.dR4V=H2x.ky6s.B2x(this.cj3x)};b2x.bC3x=function(){this.bH3x();if(this.dR4V){this.dR4V.V2x();delete this.dR4V}delete this.bdH0x};b2x.bS3x=function(d2x){var g2x=h2x.Z2x(d2x,"d:resAction"),W2x=a1x.t2x(g2x,"resAction"),D2x=a1x.t2x(g2x,"resId");if(!g2x)return;var bm2x=this.dR4V.uQ0x().eR4V(D2x);var fB4F=l2x.qA8s(bm2x),us0x=bm2x.privilege||{};switch(W2x){case"mv":if(fB4F!=100){location.dispatch2("/mv?id="+bm2x.mvid)}else{l2x.iN5S()}break;case"play":case"addto":case"download":case"share":case"fav":case"subscribe":if(W2x=="play"){var j2x=this.dR4V.uQ0x().hM5R(this.cj3x.cache.lkey)||[];this.z2x("onplay",{song:bm2x,index:k2x.dp3x(j2x,function(p2x){return p2x.id==bm2x.id})})}if(W2x=="download"&&fB4F==1e3){l2x.iN5S("因版权方要求，该歌曲不支持下载");h2x.bg2x(d2x)}else if((W2x=="play"||W2x=="addto")&&fB4F==11){l2x.bDy6s(bm2x.id,18);h2x.bg2x(d2x)}else if(fB4F==10){l2x.wL0x(us0x.fee||bm2x.fee,bm2x.id,"song",null,us0x);h2x.bg2x(d2x)}else if(fB4F==100){l2x.iN5S(null,null,null,true,bm2x);h2x.bg2x(d2x)}break;case"delete":l2x.hL5Q({btnok:"确定",btncc:"取消",message:"确定删除歌曲？",action:function(C2x){if(C2x=="ok"){this.dR4V.mP7I({pid:this.cj3x.cache.data.id,trackIds:[D2x]})}}.f2x(this)});break;default:this.z2x("onaction",{action:W2x,id:D2x})}};b2x.ro9f=function(d2x){d2x.value='<div class="u-load s-fc4"><i class="icn"></i> 加载中...</div>';this.z2x("onbeforelistload",d2x)};b2x.rv9m=function(d2x){d2x.value='<div class="n-nmusic"><h3 class="f-ff2"><i class="u-icn u-icn-21"></i>暂无音乐</h3></div>';this.z2x("onemptylist",d2x)};b2x.xb0x=function(d2x){if(this.bdH0x){a1x.nB7u(this.bdH0x+""+a1x.KQ4U());delete this.bdH0x}this.z2x("onafterlistrender",d2x)};b2x.bqt3x=function(bm2x){return l2x.qA8s(bm2x)==100};b2x.hD5I=function(d2x){var bqq3x=a1x.E2x(this.o2x,"ply-z-slt")||[],hy5D=a1x.A2x(d2x.trackId+""+a1x.KQ4U());k2x.be2x(bqq3x,function(gp5u){a1x.y2x(gp5u,"ply-z-slt")});if(hy5D){a1x.w2x(a1x.E2x(hy5D,"ply")[0],"ply-z-slt")}};b2x.bqr3x=function(bm2x){try{var ru9l=top.player.getPlaying();return ru9l&&ru9l.track.id==bm2x.id}catch(e){}};b2x.bMb8T=function(){var bqm3x,dJ4N={},bA3x={playlist:13,album:19,artist_top:2,program:17,day:24,listen_record:50};if(bqm3x=RES_KEY_REG.exec(this.cj3x.cache.lkey)){dJ4N.fid=bA3x[bqm3x[1]];dJ4N.fdata=bqm3x[2]||0;if(dJ4N.fid==50){dJ4N.fdata=this.cj3x.cache.data.uid+"|"+this.cj3x.cache.data.type}return dJ4N}};b2x.Gp3x=function(cU3x,sJ9A){if(!this.dR4V)return false;var j2x=this.dR4V.uQ0x().hM5R(this.cj3x.cache.lkey)||[];return l2x.LU4Y(j2x,cU3x,sJ9A).length==0};b2x.cov6p=function(){if(!this.dR4V)return true;var j2x=this.dR4V.uQ0x().hM5R(this.cj3x.cache.lkey)||[];return l2x.LU4Y(j2x,false,{play:true}).length<j2x.length};b2x.cou6o=function(){return this.dR4V};b2x.bMm8e=function(){var j2x=this.dR4V.uQ0x().hM5R(this.cj3x.cache.lkey)||[],m2x=[],fB4F=null;for(var i=j2x.length-1,ii;i>=0;i--){ii=j2x[i];fB4F=l2x.qA8s(ii);if(fB4F!=10&&fB4F!=100){m2x.unshift(ii)}}return m2x};b2x.bdP0x=function(type){var bm2x,nC7v,j2x=this.bqb3x().slice(0);if(type&&type==="album"&&j2x[0].privilege.fee==4){var canCmt=true;while(j2x.length){bm2x=j2x.shift();nC7v=bm2x.privilege;if(!nC7v){nC7v={fee:bm2x.fee,cp:-bm2x.status,pl:192,dl:192,toast:false,st:0,payed:0}}if(nC7v.payed==0){canCmt=false;break}}if(canCmt){return null}}else{while(j2x.length){bm2x=j2x.shift();nC7v=bm2x.privilege;if(!nC7v){nC7v={fee:bm2x.fee,cp:-bm2x.status,pl:192,dl:192,toast:false,st:0}}if(nC7v.cp>0){return null}}}return{songId:bm2x.id,fee:nC7v.fee,cp:canCmt?nC7v.cp:0,pl:nC7v.pl,dl:nC7v.dl,toast:nC7v.toast,st:nC7v.st}};b2x.bqb3x=function(){return this.dR4V.uQ0x().hM5R(this.cj3x.cache.lkey)||[]};b2x.nN7G=function(){return!this.dR4V.uQ0x().hM5R(this.cj3x.cache.lkey).length}})();
(function(){var p=NEJ.P("nej.u");var nR8J=8;var bcT9K=function(hp5u,cB3x){return hp5u<<cB3x|hp5u>>>32-cB3x};var mv6p=function(x,y){var bFm7f=(x&65535)+(y&65535),cwg8Y=(x>>16)+(y>>16)+(bFm7f>>16);return cwg8Y<<16|bFm7f&65535};var cwf8X=function(t,b,c,d){if(t<20)return b&c|~b&d;if(t<40)return b^c^d;if(t<60)return b&c|b&d|c&d;return b^c^d};var cwe8W=function(t){if(t<20)return 1518500249;if(t<40)return 1859775393;if(t<60)return-1894007588;return-899497514};var wI0x=function(){var Hs3x=function(i){return i%32},Ht3x=function(i){return 32-nR8J-i%32};return function(cQ3x,Hu3x){var XY8Q=[],lW6Q=(1<<nR8J)-1,mw7p=Hu3x?Hs3x:Ht3x;for(var i=0,l=cQ3x.length*nR8J;i<l;i+=nR8J)XY8Q[i>>5]|=(cQ3x.charCodeAt(i/nR8J)&lW6Q)<<mw7p(i);return XY8Q}}();var Yc8U=function(){var bFM7F="0123456789abcdef",Hs3x=function(i){return i%4},Ht3x=function(i){return 3-i%4};return function(iO5T,Hu3x){var bv2x=[],mw7p=Hu3x?Hs3x:Ht3x;for(var i=0,l=iO5T.length*4;i<l;i++){bv2x.push(bFM7F.charAt(iO5T[i>>2]>>mw7p(i)*8+4&15)+bFM7F.charAt(iO5T[i>>2]>>mw7p(i)*8&15))}return bv2x.join("")}}();var bcQ9H=function(){var Hs3x=function(i){return i%32},Ht3x=function(i){return 32-nR8J-i%32};return function(XY8Q,Hu3x){var bv2x=[],lW6Q=(1<<nR8J)-1,mw7p=Hu3x?Hs3x:Ht3x;for(var i=0,l=XY8Q.length*32;i<l;i+=nR8J)bv2x.push(String.fromCharCode(XY8Q[i>>5]>>>mw7p(i)&lW6Q));return bv2x.join("")}}();var Lj4n=function(){var cwd8V="=",cwc8U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hs3x=function(i){return i%4},Ht3x=function(i){return 3-i%4};return function(iO5T,Hu3x){var bv2x=[],mw7p=Hu3x?Hs3x:Ht3x;for(var i=0,bFR7K;i<iO5T.length*4;i+=3){bFR7K=(iO5T[i>>2]>>8*mw7p(i)&255)<<16|(iO5T[i+1>>2]>>8*mw7p(i+1)&255)<<8|iO5T[i+2>>2]>>8*mw7p(i+2)&255;for(var j=0;j<4;j++)bv2x.push(i*8+j*6>iO5T.length*32?cwd8V:cwc8U.charAt(bFR7K>>6*(3-j)&63))}return bv2x.join("")}}();var bcP9G=function(q,a,b,x,s,t){return mv6p(bcT9K(mv6p(mv6p(a,q),mv6p(x,t)),s),b)};var pv8n=function(a,b,c,d,x,s,t){return bcP9G(b&c|~b&d,a,b,x,s,t)};var pt8l=function(a,b,c,d,x,s,t){return bcP9G(b&d|c&~d,a,b,x,s,t)};var ps8k=function(a,b,c,d,x,s,t){return bcP9G(b^c^d,a,b,x,s,t)};var pq8i=function(a,b,c,d,x,s,t){return bcP9G(c^(b|~d),a,b,x,s,t)};var Lh4l=function(x,y){x[y>>5]|=128<<y%32;x[(y+64>>>9<<4)+14]=y;var a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(var i=0,l=x.length,bGf7Y,bGg7Z,bGj7c,bGk7d;i<l;i+=16){bGf7Y=a;bGg7Z=b;bGj7c=c;bGk7d=d;a=pv8n(a,b,c,d,x[i+0],7,-680876936);d=pv8n(d,a,b,c,x[i+1],12,-389564586);c=pv8n(c,d,a,b,x[i+2],17,606105819);b=pv8n(b,c,d,a,x[i+3],22,-1044525330);a=pv8n(a,b,c,d,x[i+4],7,-176418897);d=pv8n(d,a,b,c,x[i+5],12,1200080426);c=pv8n(c,d,a,b,x[i+6],17,-1473231341);b=pv8n(b,c,d,a,x[i+7],22,-45705983);a=pv8n(a,b,c,d,x[i+8],7,1770035416);d=pv8n(d,a,b,c,x[i+9],12,-1958414417);c=pv8n(c,d,a,b,x[i+10],17,-42063);b=pv8n(b,c,d,a,x[i+11],22,-1990404162);a=pv8n(a,b,c,d,x[i+12],7,1804603682);d=pv8n(d,a,b,c,x[i+13],12,-40341101);c=pv8n(c,d,a,b,x[i+14],17,-1502002290);b=pv8n(b,c,d,a,x[i+15],22,1236535329);a=pt8l(a,b,c,d,x[i+1],5,-165796510);d=pt8l(d,a,b,c,x[i+6],9,-1069501632);c=pt8l(c,d,a,b,x[i+11],14,643717713);b=pt8l(b,c,d,a,x[i+0],20,-373897302);a=pt8l(a,b,c,d,x[i+5],5,-701558691);d=pt8l(d,a,b,c,x[i+10],9,38016083);c=pt8l(c,d,a,b,x[i+15],14,-660478335);b=pt8l(b,c,d,a,x[i+4],20,-405537848);a=pt8l(a,b,c,d,x[i+9],5,568446438);d=pt8l(d,a,b,c,x[i+14],9,-1019803690);c=pt8l(c,d,a,b,x[i+3],14,-187363961);b=pt8l(b,c,d,a,x[i+8],20,1163531501);a=pt8l(a,b,c,d,x[i+13],5,-1444681467);d=pt8l(d,a,b,c,x[i+2],9,-51403784);c=pt8l(c,d,a,b,x[i+7],14,1735328473);b=pt8l(b,c,d,a,x[i+12],20,-1926607734);a=ps8k(a,b,c,d,x[i+5],4,-378558);d=ps8k(d,a,b,c,x[i+8],11,-2022574463);c=ps8k(c,d,a,b,x[i+11],16,1839030562);b=ps8k(b,c,d,a,x[i+14],23,-35309556);a=ps8k(a,b,c,d,x[i+1],4,-1530992060);d=ps8k(d,a,b,c,x[i+4],11,1272893353);c=ps8k(c,d,a,b,x[i+7],16,-155497632);b=ps8k(b,c,d,a,x[i+10],23,-1094730640);a=ps8k(a,b,c,d,x[i+13],4,681279174);d=ps8k(d,a,b,c,x[i+0],11,-358537222);c=ps8k(c,d,a,b,x[i+3],16,-722521979);b=ps8k(b,c,d,a,x[i+6],23,76029189);a=ps8k(a,b,c,d,x[i+9],4,-640364487);d=ps8k(d,a,b,c,x[i+12],11,-421815835);c=ps8k(c,d,a,b,x[i+15],16,530742520);b=ps8k(b,c,d,a,x[i+2],23,-995338651);a=pq8i(a,b,c,d,x[i+0],6,-198630844);d=pq8i(d,a,b,c,x[i+7],10,1126891415);c=pq8i(c,d,a,b,x[i+14],15,-1416354905);b=pq8i(b,c,d,a,x[i+5],21,-57434055);a=pq8i(a,b,c,d,x[i+12],6,1700485571);d=pq8i(d,a,b,c,x[i+3],10,-1894986606);c=pq8i(c,d,a,b,x[i+10],15,-1051523);b=pq8i(b,c,d,a,x[i+1],21,-2054922799);a=pq8i(a,b,c,d,x[i+8],6,1873313359);d=pq8i(d,a,b,c,x[i+15],10,-30611744);c=pq8i(c,d,a,b,x[i+6],15,-1560198380);b=pq8i(b,c,d,a,x[i+13],21,1309151649);a=pq8i(a,b,c,d,x[i+4],6,-145523070);d=pq8i(d,a,b,c,x[i+11],10,-1120210379);c=pq8i(c,d,a,b,x[i+2],15,718787259);b=pq8i(b,c,d,a,x[i+9],21,-343485551);a=mv6p(a,bGf7Y);b=mv6p(b,bGg7Z);c=mv6p(c,bGj7c);d=mv6p(d,bGk7d)}return[a,b,c,d]};var bsc3x=function(K2x,i2x){var wq0x=wI0x(K2x,!0);if(wq0x.length>16)wq0x=Lh4l(wq0x,K2x.length*nR8J);var Ys8k=Array(16),Pb5g=Array(16);for(var i=0;i<16;i++){Ys8k[i]=wq0x[i]^909522486;Pb5g[i]=wq0x[i]^1549556828}var cL3x=Lh4l(Ys8k.concat(wI0x(i2x,!0)),512+i2x.length*nR8J);return Lh4l(Pb5g.concat(cL3x),512+128)};var Lc4g=function(x,bt2x){x[bt2x>>5]|=128<<24-bt2x%32;x[(bt2x+64>>9<<4)+15]=bt2x;var w=Array(80),a=1732584193,b=-271733879,c=-1732584194,d=271733878,e=-1009589776;for(var i=0,l=x.length,bGs7l,bGv7o,bdo0x,bGw7p,bGx7q;i<l;i+=16){bGs7l=a;bGv7o=b;bdo0x=c;bGw7p=d;bGx7q=e;for(var j=0;j<80;j++){w[j]=j<16?x[i+j]:bcT9K(w[j-3]^w[j-8]^w[j-14]^w[j-16],1);var t=mv6p(mv6p(bcT9K(a,5),cwf8X(j,b,c,d)),mv6p(mv6p(e,w[j]),cwe8W(j)));e=d;d=c;c=bcT9K(b,30);b=a;a=t}a=mv6p(a,bGs7l);b=mv6p(b,bGv7o);c=mv6p(c,bdo0x);d=mv6p(d,bGw7p);e=mv6p(e,bGx7q)}return[a,b,c,d,e]};var bsd3x=function(K2x,i2x){var wq0x=wI0x(K2x);if(wq0x.length>16)wq0x=Lc4g(wq0x,K2x.length*nR8J);var Ys8k=Array(16),Pb5g=Array(16);for(var i=0;i<16;i++){Ys8k[i]=wq0x[i]^909522486;Pb5g[i]=wq0x[i]^1549556828}var cL3x=Lc4g(Ys8k.concat(wI0x(i2x)),512+i2x.length*nR8J);return Lc4g(Pb5g.concat(cL3x),512+160)};p.cNp1x=function(K2x,i2x){return Yc8U(bsd3x(K2x,i2x))};p.cNs1x=function(K2x,i2x){return Lj4n(bsd3x(K2x,i2x))};p.cNt1x=function(K2x,i2x){return bcQ9H(bsd3x(K2x,i2x))};p.cQs2x=function(K2x,i2x){return Yc8U(bsc3x(K2x,i2x),!0)};p.cNw2x=function(K2x,i2x){return Lj4n(bsc3x(K2x,i2x),!0)};p.cNy2x=function(K2x,i2x){return bcQ9H(bsc3x(K2x,i2x),!0)};p.cNz2x=function(i2x){return Yc8U(Lc4g(wI0x(i2x),i2x.length*nR8J))};p.cNA2x=function(i2x){return Lj4n(Lc4g(wI0x(i2x),i2x.length*nR8J))};p.cNB2x=function(i2x){return bcQ9H(Lc4g(wI0x(i2x),i2x.length*nR8J))};p.lk6e=function(i2x){return Yc8U(Lh4l(wI0x(i2x,!0),i2x.length*nR8J),!0)};p.cNC2x=function(i2x){return Lj4n(Lh4l(wI0x(i2x,!0),i2x.length*nR8J),!0)};p.cND2x=function(i2x){return bcQ9H(Lh4l(wI0x(i2x,!0),i2x.length*nR8J),!0)};p.cNE2x=function(i2x){return Yc8U(wI0x(i2x,!0),!0)}})();
(function(){var c2x=NEJ.P,a1x=c2x("nej.e"),v2x=c2x("nej.j"),bc2x=c2x("nej.o"),k2x=c2x("nej.u"),h2x=c2x("nej.v"),bF3x=c2x("nej.ui"),q2x=c2x("nm.d"),l2x=c2x("nm.x"),n2x=c2x("nm.l"),b2x,L2x;n2x.bWB2x=NEJ.C();b2x=n2x.bWB2x.M2x(n2x.ek4o,!0);b2x.cy3x=function(){this.cG3x()};b2x.bX3x=function(){this.ch3x();var j2x=a1x.E2x(this.o2x,"j-flag");this.Hd3x=j2x[0];this.bsu3x=j2x[1];this.byp5u=j2x[2];h2x.s2x(j2x[3],"click",this.bsv3x.f2x(this))};b2x.ce3x=function(){this.cb3x="ntp-alert"};b2x.bo2x=function(e2x){e2x.parent=e2x.parent||document.body;this.bp2x(e2x);a1x.bd2x(this.Hd3x,"display","");if(e2x.type=="noicon"){a1x.bd2x(this.Hd3x,"display","none")}else if(e2x.type=="success"){a1x.fu4y(this.Hd3x,"u-icn-88","u-icn-89")}else{a1x.fu4y(this.Hd3x,"u-icn-89","u-icn-88")}this.bsu3x.innerHTML=e2x.mesg||"";if(e2x.mesg2){a1x.y2x(this.byp5u,"f-hide");this.byp5u.innerHTML=e2x.mesg2||""}else{a1x.w2x(this.byp5u,"f-hide")}};b2x.bC3x=function(){this.bH3x()};b2x.bsv3x=function(d2x){this.z2x("onnotice");this.br2x()};n2x.eK4O=function(e2x){if(this.Bj2x){this.Bj2x.V2x();delete this.Bj2x}this.Bj2x=n2x.bWB2x.B2x(e2x);this.Bj2x.I2x()}})();
(function(){var c2x=NEJ.P,h2x=c2x("nej.v"),H2x=c2x("nej.ut"),q2x=c2x("nm.d"),l2x=c2x("nm.x"),n2x=c2x("nm.l"),k2x=c2x("nej.u"),b2x,L2x;q2x.fo4s({"comment-list":{url:"/api/v1/resource/comments/{rid}",format:function(R2x,e2x){this.z2x("oncantopcomments",R2x.isMusician&&R2x.cnum>0);if(R2x.currentComment){this.tD9u("comment_cur-"+e2x.data.rid,[R2x.currentComment])}if(R2x.topComments){R2x.hotComments=R2x.topComments.concat(R2x.hotComments||[])}if(R2x.hotComments){this.tD9u("comment_hot-"+e2x.data.rid,R2x.hotComments)}if(/R_SO_(\d)_(\d+)/.test(e2x.data.rid))this.csP7I(R2x.comments,RegExp.$2);var GW3x=R2x.comments||[];if(R2x.more&&GW3x.length<e2x.data.limit){GW3x.length=e2x.data.limit}return{total:R2x.total||0,list:GW3x}},finaly:function(d2x){h2x.z2x(q2x.sj9a,"listchange",d2x)}},"comment-add":{url:"/api/resource/comments/add",format:function(R2x,e2x){n2x.ba2x.I2x({tip:"评论成功"});return R2x.comment},finaly:function(d2x){h2x.z2x(q2x.sj9a,"listchange",d2x)},onmessage:function(cd3x,m2x){var cU3x="评论失败";if(cd3x==407){n2x.ba2x.I2x({tip:"评论成功"});h2x.z2x(q2x.sj9a,"listchange",{action:"add"});return}else if(cd3x==404){cU3x="评论的资源已被删除"}else if(cd3x==315){cU3x="根据对方设置，你没有该操作权限"}else if(cd3x==405){cU3x=m2x.message||"评论过于频繁"}else if(cd3x==250){cU3x=m2x.message||m2x.msg||"评论异常"}else if(cd3x==512){l2x.iN5S(m2x.ext.msg);return}n2x.ba2x.I2x({tip:cU3x,type:2})}},"comment-del":{url:"/api/resource/comments/delete",filter:function(dS4W,bj2x){if(dS4W.data.type=="hot"){bj2x.url="/api/report/reportcomment";dS4W.data.reason="段子或无意义的评论";dS4W.data.type=0}else if(dS4W.data.type=="admin"){bj2x.url="/api/comment/delete"}else{bj2x.url="/api/resource/comments/delete"}},format:function(R2x,e2x){var De2x=this.hM5R("comment_hot-"+e2x.data.threadId),r2x=k2x.dp3x(De2x,function(p2x){return p2x.commentId==e2x.data.commentId});if(r2x!=-1){De2x.splice(r2x,1)}if(e2x.data.type=="hot"||k2x.uO0x(e2x.data.type)){var p2x=this.eR4V(e2x.data.commentId);if(p2x){p2x.isRemoveHotComment=true}h2x.z2x(q2x.sj9a,"listchange",{action:"refresh",key:e2x.key});n2x.ba2x.I2x({tip:"已从精彩评论中移除",type:1});return null}return this.eR4V(e2x.data.commentId)},finaly:function(d2x){h2x.z2x(q2x.sj9a,"listchange",d2x)},onmessage:function(cd3x){n2x.ba2x.I2x({tip:"评论删除失败",type:2})}},"comment-update":{url:"/api/v1/comment/like",filter:function(e2x,bj2x){if(e2x.data.like){bj2x.url="/api/v1/comment/like"}else{bj2x.url="/api/v1/comment/unlike"}},format:function(R2x,e2x){var sK9B=this.eR4V(e2x.data.commentId);sK9B.liked=e2x.data.like;sK9B.likedCount=sK9B.likedCount||0;sK9B.likedCount=sK9B.likedCount+(sK9B.liked?1:-1);return sK9B},finaly:function(d2x){d2x.action="refresh";h2x.z2x(q2x.sj9a,"listchange",d2x)},onmessage:function(cd3x,m2x){if(cd3x==315){n2x.ba2x.I2x({tip:"根据对方设置，你没有该操作权限",type:2})}else if(cd3x==250){n2x.ba2x.I2x({tip:m2x.message||"点赞异常",type:2})}else{n2x.ba2x.I2x({tip:"操作失败",type:2})}}},"comment-reply":{url:"/api/v1/resource/comments/reply",format:function(R2x,e2x){return R2x.comment},finaly:function(d2x,e2x){h2x.z2x(q2x.sj9a,"listchange",d2x);n2x.ba2x.I2x({tip:"回复成功"})},onmessage:function(cd3x,m2x){if(cd3x==407){n2x.ba2x.I2x({tip:"回复成功"});this.z2x("onreply")}else if(cd3x==315){n2x.ba2x.I2x({tip:"根据对方设置，你没有该操作权限",type:2})}else if(cd3x==250){n2x.ba2x.I2x({tip:m2x.message||"评论异常",type:2})}else{n2x.ba2x.I2x({tip:"回复失败，请稍后再试",type:2})}}},"comment-top":{url:"/api/v1/resource/comments/musician/topcomment",finaly:function(d2x,e2x){if(d2x.stopped){return}h2x.z2x(q2x.sj9a,"listchange",d2x);n2x.ba2x.I2x({tip:e2x.data.audit==1?"取消置顶成功":"置顶成功"})},onmessage:function(cd3x,m2x){var R2x=m2x.ext||{};if(cd3x==-3){var GW3x=R2x.topComments,bWQ2x=[],bA3x={};if(GW3x&&GW3x.length){k2x.be2x(GW3x,function(p2x,r2x){if(!bA3x[p2x.threadId]){bWQ2x.push(p2x.type+"《"+k2x.dL4P(p2x.name)+"》");bA3x[p2x.threadId]=true}})}else{cQ3x="其余资源"}n2x.eK4O({mesg:'<span style="line-height:20px;" class="f-fw0">'+bWQ2x.join("、")+"<br/>使用了置顶权限，取消后再操作新评论</span>",type:"noicon",title:"提示"})}else if(cd3x==-2){n2x.ba2x.I2x({tip:"该条评论已经置顶",type:2})}else{n2x.ba2x.I2x({tip:"操作失败，请稍后再试",type:2})}}}});q2x.sj9a=NEJ.C();b2x=q2x.sj9a.M2x(q2x.hO5T);b2x.cy3x=function(){this.cG3x();this.kV6P=q2x.hX5c.B2x()};b2x.bo2x=function(e2x){this.bp2x(e2x)};b2x.bC3x=function(){this.bH3x()};b2x.byy5D=function(e2x){e2x.onload=this.Gq3x.f2x(this,e2x);this.ck3x("comment-reply",e2x)};b2x.Gq3x=function(e2x,p2x){e2x.key="comment-"+e2x.data.threadId;var d2x=this.AI1x(e2x,p2x);this.z2x("onreply",d2x);return d2x};b2x.byC5H=function(e2x){if(!e2x.onload){e2x.onload=this.csO7H.f2x(this,e2x)}this.ck3x("comment-top",e2x)};b2x.csO7H=function(e2x,p2x){return{action:"top"}};b2x.csP7I=function(j2x,csN7G){var m2x=[];if(!j2x||!j2x.length)return;k2x.be2x(j2x,function(csM7F){var R2x={type:"song",cid:csM7F.commentId,sourceid:csN7G};m2x.push({action:"commentimpress",json:R2x})},this);this.kV6P.bde9V(m2x)};b2x.bLS8K=function(p2x,bcG9x){p2x.topCommentId=p2x.topCommentId||0};H2x.fM4Q.B2x({element:q2x.sj9a,event:"listchange"})})();
(function(){var c2x=NEJ.P,bc2x=NEJ.O,bs2x=NEJ.F,a1x=c2x("nej.e"),h2x=c2x("nej.v"),k2x=c2x("nej.u"),dt4x=c2x("nej.p"),bb2x=c2x("nej.ui"),v2x=c2x("nej.j"),l2x=c2x("nm.x"),q2x=c2x("nm.d"),n2x=c2x("nm.l"),x2x=c2x("nm.w"),gG5L=c2x("nm.ut"),b2x,L2x;x2x.CQ2x=NEJ.C();b2x=x2x.CQ2x.M2x(bb2x.ep4t);L2x=x2x.CQ2x.cs3x;b2x.bo2x=function(e2x){this.bp2x(e2x);this.eH4L=e2x.type||1;if(a1x.is5x("program-data")){this.fV4Z=JSON.parse(a1x.is5x("program-data"))}this.eh4l=e2x.resource||{};this.tF0x=a1x.oC8u(a1x.cf3x("m-wgt-input-"+this.eH4L,{placeholder:e2x.placeholder||""}));this.bXg2x=e2x.type==2?true:false;var j2x=a1x.E2x(this.tF0x,"j-flag");this.gz5E=j2x[0];this.bxV5a=a1x.E2x(this.tF0x,"btns")[0];this.me6Y=j2x[3];this.csK7D=j2x[4];a1x.gW5b(this.gz5E,"holder");if(a1x.bE3x(this.gz5E.parentNode,"holder-parent")){a1x.bd2x(this.gz5E.parentNode,"display","block")}this.gz5E.value=e2x.input||"";this.o2x.appendChild(this.tF0x);this.pM8E={start:0,end:0};if(!e2x.nomention){this.hS5X=x2x.Uj7c.B2x({parent:document.body,target:this.gz5E})}else{a1x.bd2x(j2x[2],"display","none")}this.byQ5V=e2x.numLimit||140;this.gx5C();this.csJ7C();this.bY3x([[this.me6Y,"click",this.uM0x.f2x(this)],[j2x[2],"click",this.bxZ5e.f2x(this)],[j2x[1],"click",this.byb5g.f2x(this)],[this.gz5E,"focus",this.kH6B.f2x(this)],[this.gz5E,"blur",this.oB8t.f2x(this)],[this.gz5E,"input",this.eV4Z.f2x(this)],[this.gz5E,"keyup",this.wz0x.f2x(this)],[this.gz5E,"click",this.mJ7C.f2x(this)]]);if(!k2x.hh5m(e2x.onbeforesubmit))this.s2x("onbeforesubmit",this.csI7B.f2x(this));if(!k2x.hh5m(e2x.onloading))this.s2x("onloading",this.csH7A.f2x(this))};b2x.bC3x=function(){this.gz5E.value="";if(this.hE5J){this.hE5J.V2x();delete this.hE5J}if(this.hS5X){this.hS5X.V2x();delete this.hS5X}this.bH3x();a1x.cV3x(this.tF0x)};b2x.csI7B=function(){var C2x=this.gz5E.value;if(this.me6Y.className.indexOf("dis")>=0)return;if(!this.Jc4g()||!this.Cz2x())return;if(l2x.kE6y(C2x)){n2x.ba2x.I2x({type:2,tip:"输入点内容再提交吧"});return}if(k2x.fO4S(C2x)>2*this.byQ5V){n2x.ba2x.I2x({type:2,tip:"输入不能超过"+this.byQ5V+"个字符"});return}return!0};b2x.csH7A=function(){a1x.w2x(this.me6Y,"u-btn-1-dis");if(this.me6Y.innerText.indexOf("...")<0){this.me6Y.innerText=this.me6Y.innerText+"..."}this.up0x=!0};b2x.zr1x=function(){if(!this.up0x)return;this.up0x=!1;a1x.y2x(this.me6Y,"u-btn-1-dis");var cI3x=this.me6Y.innerText;this.me6Y.innerText=cI3x.substring(0,cI3x.length-3)};b2x.mJ7C=function(){this.pM8E=gG5L.wK0x(this.gz5E)};b2x.uM0x=function(hd5i){h2x.bg2x(hd5i);var C2x=this.gz5E.value;if(!this.z2x("onbeforesubmit",{value:C2x}))return;if(this.eH4L!=4)this.z2x("onloading");gG5L.bVH2x(C2x);if(this.hS5X){this.hS5X.IF3x()}if(this.hE5J){this.hE5J.br2x()}this.z2x("onsubmit",C2x);this.gx5C();return false};b2x.qp8h=function(){this.gz5E.value="";this.gx5C()};b2x.gj5o=function(){return this.gz5E.value||""};b2x.nu7n=function(){var jw5B=this.gz5E;var u2x=a1x.t2x(jw5B,"type");this.nr7k=u2x;if(!this.Cz2x())return;var bt2x=this.gj5o().length;this.gz5E.focus();gG5L.bfw0x(this.gz5E,{start:bt2x,end:bt2x});this.mJ7C()};b2x.bxZ5e=function(d2x){h2x.bg2x(d2x);if(!this.Cz2x())return;!!this.hE5J&&this.hE5J.br2x();this.hS5X.Uh7a();this.gx5C()};b2x.byb5g=function(d2x){h2x.bg2x(d2x);if(!this.Cz2x())return;if(!this.hE5J){this.hE5J=n2x.My5D.B2x({parent:this.bxV5a,rightwards:this.eH4L==6});this.hE5J.s2x("onselect",this.zY1x.f2x(this));a1x.bd2x(this.hE5J.mi6c().parentNode,"position","relative")}this.hE5J.I2x();this.z2x("onemotlayershow");if(this.hS5X){this.hS5X.IF3x()}};b2x.zY1x=function(d2x){var bq2x="["+d2x.text+"]";h2x.z2x(this.gz5E,"focus");this.gz5E.focus();gG5L.Mt4x(this.gz5E,this.pM8E,bq2x);this.gx5C();h2x.z2x(this.gz5E,"keyup")};b2x.eV4Z=function(d2x){dt4x.dz4D.browser=="ie"&&dt4x.dz4D.version<"7.0"?setTimeout(this.gx5C.f2x(this),0):this.gx5C()};b2x.wz0x=function(d2x){this.mJ7C();if(this.bXg2x)this.csG7z();this.eV4Z()};b2x.Jc4g=function(){if(!GUser||!GUser.userId||GUser.userId<0){top.login();return}return true};b2x.kH6B=function(d2x){var g2x=h2x.Z2x(d2x,"d:type");var u2x=a1x.t2x(g2x,"type");this.nr7k=u2x;if(!this.Jc4g()){this.gz5E.blur();return}if(!this.Cz2x()){this.gz5E.blur();return}this.z2x("onfocus")};b2x.oB8t=function(){this.z2x("onblur")};b2x.gx5C=function(){var bt2x=this.byQ5V-Math.ceil(k2x.fO4S(this.gz5E.value)/2);this.csK7D.innerHTML=bt2x>=0?bt2x:'<em class="s-fc6">'+bt2x+"</em>"};b2x.csG7z=function(){var Fe3x=76;var csF7y=function(){if(parseInt(ci3x)>Fe3x){a1x.bd2x(this.gz5E,"height","auto");a1x.bd2x(this.gz5E,"height",Fe3x+"px");a1x.bd2x(this.gz5E,"overflowY","scroll")}else{a1x.bd2x(this.gz5E,"height","auto");a1x.bd2x(this.gz5E,"height",ci3x);a1x.bd2x(this.gz5E,"overflowY","hidden")}}.f2x(this);var ua0x=function(string,number){for(var i=0,r="";i<number;i++)r+=string;return r};this.Nk5p.innerHTML=this.gz5E.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(space){return ua0x("&nbsp;",space.length-1)+" "})+"&nbsp";var ci3x=this.Nk5p.offsetHeight>this.Nl5q?this.Nk5p.offsetHeight:this.Nl5q;ci3x+="px";var cNW2x=a1x.dj3x(this.gz5E,"height");setTimeout(csF7y,10)};b2x.Se6Y=function(){var qm8e=["overflowX","overflowY","fontSize","fontFamily","lineHeight"];for(var i=0;i<qm8e.length;i++){a1x.bd2x(this.Nk5p,qm8e[i],a1x.dj3x(this.gz5E,qm8e[i]))}var cJ3x=this.gz5E.offsetWidth-parseInt(a1x.dj3x(this.gz5E,"paddingLeft"))-parseInt(a1x.dj3x(this.gz5E,"paddingRight"))+"px";a1x.bd2x(this.Nk5p,"width",cJ3x)};b2x.csJ7C=function(){if(this.bXg2x){if(!a1x.E2x(document.body,"shadow-textarea")[0]){var ea4e='<div style="position:absolute;border: none;left:-10000px;word-wrap: break-word;overflow: hidden;resize:none" class="shadow-textarea"></div>';var g2x=a1x.oC8u(ea4e);document.body.appendChild(g2x);this.Nk5p=a1x.E2x(document.body,"shadow-textarea")[0]}else{this.Nk5p=a1x.E2x(document.body,"shadow-textarea")[0]}this.Nl5q=parseInt(a1x.dj3x(this.gz5E,"height"));a1x.bd2x(this.gz5E,"overflow","hidden");this.Se6Y()}};b2x.Cz2x=function(){var d2x={};if(this.fV4Z&&this.fV4Z.buyed!=true&&this.fV4Z.programFeeType>=10||this.fV4Z&&this.fV4Z.buyed!=true&&this.fV4Z.programFeeType==5&&this.fV4Z.radio.radioFeeType==2||this.fV4Z&&this.fV4Z.buyed!=true&&this.fV4Z.radio.feeScope==1&&!(this.fV4Z.radio.radioFeeType==0&&this.nr7k==11)){var bqy3x=this.fV4Z.radio.id,bqp3x="djradio";l2x.Wk7d({id:bqy3x,radiotype:bqp3x})}else{this.z2x("oncheckvalid",d2x);return!d2x.stopped}}})();
(function(){var c2x=NEJ.P,bc2x=NEJ.O,bs2x=NEJ.F,a1x=c2x("nej.e"),h2x=c2x("nej.v"),bb2x=c2x("nej.ui"),H2x=c2x("nej.ut"),k2x=c2x("nej.u"),l2x=c2x("nm.x"),q2x=c2x("nm.d"),x2x=c2x("nm.w"),n2x=c2x("nm.l"),b2x,L2x;x2x.Wh7a=NEJ.C();b2x=x2x.Wh7a.M2x(bb2x.ep4t);L2x=x2x.Wh7a.cs3x;b2x.cy3x=function(){this.cj3x={limit:20,parent:null,item:{klass:"m-wgt-comment-item",timeformat:l2x.zm1x,getRichText:l2x.yx1x,escape:this.csB7u,getAuthIcon:l2x.bpx3x,getPlayCount:l2x.jb5g,canTop:function(){return this.csA7t&&this.csz7s}.f2x(this)},pager:{parent:null,clazz:"u-page"},cache:{clear:true,lkey:"comment",key:"commentId",data:{},klass:q2x.sj9a,onerror:this.csy7r.f2x(this),oncantopcomments:function(C2x){this.csA7t=C2x}.f2x(this)},onbeforelistload:function(d2x){d2x.value='<div class="u-load s-fc4"><i class="icn"></i> 加载中...</div>'},onemptylist:function(d2x){this.bXF2x(d2x);d2x.stopped=!0}.f2x(this),onafterlistrender:this.xb0x.f2x(this)};this.ft4x={placeholder:"评论",parent:null,onsubmit:this.csx7q.f2x(this),oncheckvalid:this.Cz2x.f2x(this),onfocus:this.csw7p.f2x(this),onblur:this.csv7o.f2x(this)};this.cG3x()};b2x.bX3x=function(){this.ch3x()};b2x.bo2x=function(e2x){this.bp2x(e2x);this.S2x=q2x.sj9a.B2x({key:"commentId",onreply:this.Wp7i.f2x(this),onerror:this.cst7m.f2x(this)});this.eh4l=l2x.cGu0x(e2x.commentThreadId)||{};this.tm9d=e2x.restrict;if(e2x.oncheckvalid){this.ft4x.oncheckvalid=e2x.oncheckvalid}this.Nv5A=x2x.CQ2x.B2x(this.ft4x);var bw2x=k2x.gY5d(location.search.slice(1));if(bw2x.commentId){this.cj3x.cache.data.commentId=bw2x.commentId}this.csz7s=e2x.canTop;this.cj3x.item.resUserId=e2x.resourceUserId;this.cj3x.cache.data.rid=e2x.commentThreadId;this.cj3x.cache.lkey="comment-"+e2x.commentThreadId;if(e2x.commentCount>0){this.cj3x.cache.total=e2x.commentCount}if(!!this.dT4X)this.dT4X.V2x();this.dT4X=H2x.ky6s.B2x(this.cj3x);var css7l=[[this.o2x,"click",this.eD4H.f2x(this)],[q2x.sj9a,"listchange",this.IN4R.f2x(this)]];l2x.jU6O();this.bY3x(css7l)};b2x.bC3x=function(){this.bH3x();this.Nv5A.V2x();if(this.dT4X){this.dT4X.V2x();delete this.dT4X}};b2x.csB7u=function(bq2x){return k2x.dL4P((bq2x||"").replace(/\s{2,}/g," ").trim())};b2x.Jc4g=function(){if(GUser&&GUser.userId>0){return!0}else{top.login();return!1}};b2x.Zw8o=NEJ.F;b2x.IN4R=function(d2x){var cD3x=this.dT4X.lR6L();if(this.iq5v)this.iq5v.innerText=cD3x;switch(d2x.action){case"reply":case"add":this.Nv5A.qp8h();this.Nv5A.zr1x();this.z2x("onadd",{total:Math.max(cD3x,0)});this.Zw8o(cD3x);break;case"delete":this.z2x("ondelete",{total:Math.max(cD3x,0)});this.Zw8o(cD3x);break;case"update":break;case"top":if(!!this.dT4X)this.dT4X.V2x();this.dT4X=H2x.ky6s.B2x(this.cj3x);break}this.z2x("oncountchange",{total:Math.max(cD3x,0)})};b2x.qn8f=function(D2x,csr7k){if(!this.Jc4g())return;if(!!this.rI9z){this.rI9z.input.V2x();if(this.rI9z.attachId==D2x){delete this.rI9z;return}}this.rI9z={attachId:D2x,wrapper:a1x.do3x("div")};var i2x=this.S2x.eR4V(D2x);csr7k.insertAdjacentElement("afterEnd",this.rI9z.wrapper);this.rI9z.input=x2x.CQ2x.B2x({input:"回复"+i2x.user.nickname+":",parent:this.rI9z.wrapper,type:2,onsubmit:this.csq7j.f2x(this,D2x),onbeforesubmit:function(d2x){var C2x=d2x.value,lY6S=C2x.indexOf(":"),X2x=C2x.substring(0,lY6S),bq2x=C2x.substring(lY6S+1);if(X2x=="回复"+i2x.user.nickname){if(l2x.kE6y(bq2x)){n2x.ba2x.I2x({type:"2",tip:"输入点内容再提交吧"});return false}}else if(l2x.kE6y(C2x)){n2x.ba2x.I2x({type:"2",tip:"输入点内容再提交吧"});return false}if(k2x.fO4S(C2x)>2*140){n2x.ba2x.I2x({type:"2",tip:"输入不能超过140个字符"});return false}return true}});this.rI9z.input.nu7n()};b2x.csq7j=function(D2x,C2x){l2x.ln6h(this.lh6b.f2x(this));this.vb0x={id:D2x,value:C2x}};b2x.cso7h=function(D2x,C2x,cq3x){var i2x=this.S2x.eR4V(D2x),lY6S=C2x.indexOf(":"),X2x=C2x.substring(0,lY6S),bq2x=C2x.substring(lY6S+1);if(X2x=="回复"+i2x.user.nickname){this.S2x.byy5D({key:"comment",data:{commentId:D2x,threadId:this.cj3x.cache.data.rid,content:bq2x,checkToken:cq3x||""},ext:{index:this.dT4X.bOJ9A()?this.dT4X.bOJ9A().uT0x():0}})}else{this.dT4X.uR0x({threadId:this.cj3x.cache.data.rid,content:C2x,checkToken:cq3x||""})}};b2x.Wp7i=function(d2x){this.rI9z.input.zr1x();this.rI9z.input.V2x();a1x.cV3x(this.rI9z.wrapper);delete this.rI9z};b2x.bzh5m=function(D2x){l2x.hL5Q({btnok:"确定",btncc:"取消",message:"确定删除评论？",action:function(C2x){if(C2x=="ok"){this.dT4X.mP7I({commentId:D2x,threadId:this.cj3x.cache.data.rid})}}.f2x(this)})};b2x.csn7g=function(D2x){l2x.hL5Q({btnok:"确定",btncc:"取消",message:"确定移除精彩评论？",action:function(C2x){if(C2x=="ok"){this.dT4X.mP7I({type:"hot",commentId:D2x,threadId:this.cj3x.cache.data.rid})}}.f2x(this)})};b2x.csi7b=function(D2x){this.S2x.byC5H({data:{commentid:D2x,threadid:this.cj3x.cache.data.rid,audit:0}})};b2x.csc7V=function(D2x,ii5n){this.S2x.byC5H({data:{commentid:D2x,threadid:this.cj3x.cache.data.rid,audit:1,topcommentid:ii5n}})};b2x.csb7U=function(D2x,ii5n){this.S2x.byC5H({data:{commentid:D2x,threadid:this.cj3x.cache.data.rid,audit:1,topcommentid:ii5n},onload:function(D2x){this.dT4X.mP7I({commentId:D2x,threadId:this.cj3x.cache.data.rid});return{stopped:true}}.f2x(this,D2x)})};b2x.csw7p=function(){this.z2x("onfocus")};b2x.csv7o=function(){this.z2x("onblur")};b2x.eD4H=function(d2x){var g2x=h2x.Z2x(d2x,"d:type"),u2x=a1x.t2x(g2x,"type"),D2x=a1x.t2x(g2x,"id"),ii5n=a1x.t2x(g2x,"tid");this.z2x("onclick",d2x);if(d2x.stoped)return;switch(u2x){case"reply":if(!this.Cz2x({}))return;this.qn8f(D2x,h2x.Z2x(d2x,"c:itm"));h2x.bg2x(d2x);break;case"delete":if(ii5n){l2x.hL5Q({btnok:"确定",okstyle:"u-btn2 u-btn2-2 u-btn2-w4",btncc:"取消",message:"确定要取消置顶并删除这条评论吗？",action:function(C2x){if(C2x=="ok"){this.csb7U(D2x,ii5n)}}.f2x(this)})}else{this.bzh5m(D2x)}break;case"unlike":case"like":if(!this.Jc4g())return;this.Zs8k={commentId:D2x,threadId:this.cj3x.cache.data.rid,like:u2x=="like"};l2x.ln6h(this.lh6b.f2x(this));this.z2x("onlikeclick",{action:u2x,threadId:this.cj3x.cache.data.rid,commentId:D2x});break;case"reject":this.csn7g(D2x);break;case"admindelete":l2x.hL5Q({btnok:"确定",btncc:"取消",message:"确定删除评论？",action:function(C2x){if(C2x=="ok"){this.dT4X.mP7I({type:"admin",commentId:D2x,threadId:this.cj3x.cache.data.rid})}}.f2x(this)});case"gotop":this.csi7b(D2x);break;case"canceltop":l2x.hL5Q({btnok:"解除置顶",okstyle:"u-btn2 u-btn2-2 u-btn2-w4",btncc:"取消",message:"确定不再置顶该评论？",action:function(C2x){if(C2x=="ok"){this.csc7V(D2x,ii5n)}}.f2x(this)});break;default:break}};b2x.lh6b=function(cq3x){if(this.dT4X&&this.Zs8k){this.Zs8k.checkToken=cq3x||"";this.dT4X.qo8g(this.Zs8k);delete this.Zs8k}else if(this.Zr8j){this.Zr8j.checkToken=cq3x||"";this.dT4X.uR0x(this.Zr8j);delete this.Zr8j}else if(this.vb0x){this.cso7h(this.vb0x.id,this.vb0x.value,cq3x||"");delete this.cNY2x}};b2x.csx7q=function(C2x){if(!this.Jc4g()||l2x.kE6y(C2x))return;this.Zr8j={threadId:this.cj3x.cache.data.rid,content:C2x};l2x.ln6h(this.lh6b.f2x(this));this.z2x("onaddclick")};b2x.csy7r=function(){this.Nv5A.zr1x()};b2x.cst7m=function(){if(this.rI9z)this.rI9z.input.zr1x()};b2x.nu7n=function(){a1x.nB7u(this.hr5w);this.Nv5A.nu7n()};b2x.xb0x=function(d2x){if(d2x.offset==0){this.bXF2x(d2x)}this.z2x("onafterlistrender",d2x)};b2x.bXF2x=function(d2x){var jT6N,ea4e="",eu4y='<h3 class="u-hd4">{title}({count})</h3>',Zq8i=this.S2x.hM5R("comment_cur-"+this.cj3x.cache.data.rid),De2x=this.S2x.hM5R("comment_hot-"+this.cj3x.cache.data.rid),bYw2x=l2x.bee0x(eu4y,{count:this.dT4X.lR6L(),title:"最新评论"});if(Zq8i.length||De2x.length||this.cj3x.cache.data.commentId){if(Zq8i.length){jT6N={beg:0,end:Zq8i.length-1,xlist:Zq8i};ea4e='<h3 class="u-hd4">当前评论</h3>'+a1x.cf3x(this.cj3x.item.klass,NEJ.X(jT6N,this.cj3x.item))+"<br>";a1x.nB7u(this.o2x)}else if(this.cj3x.cache.data.commentId){ea4e='<h3 class="u-hd4">当前评论</h3><div class="m-dlist"><div class="src src-empty f-cb"><span class="s-fc4">该评论已删除</span></div></div><br>';a1x.nB7u(this.o2x)}if(De2x.length){jT6N={beg:0,end:De2x.length-1,xlist:De2x,hot:true};ea4e=ea4e+l2x.bee0x('<h3 class="u-hd4">{title}</h3>',{count:De2x.length,title:"精彩评论"})+a1x.cf3x(this.cj3x.item.klass,NEJ.X(jT6N,this.cj3x.item))+"<br>"}d2x.parent.insertAdjacentHTML("afterBegin",ea4e+"<br>"+(this.dT4X.lR6L()>0?bYw2x:""))}else{if(this.dT4X.lR6L()>0){d2x.parent.insertAdjacentHTML("afterBegin",bYw2x)}}};b2x.Cz2x=function(d2x){if(this.tm9d){if(this.tm9d.cp>0){return true}else{if(this.tm9d.fee>0){if(this.tm9d.st!=null&&this.tm9d.st<0){l2x.iN5S(null,null,null,true,{id:this.tm9d.songId,privilege:this.tm9d})}else{l2x.wL0x(this.tm9d.fee,this.tm9d.songId,this.tm9d.type,{trigger:"comment"},this.tm9d)}}else{if(this.eh4l&&this.eh4l.type==18&&this.tm9d.toast){l2x.iN5S(null,null,null,true,{id:this.eh4l.id,privilege:this.tm9d})}else{l2x.iN5S()}}d2x.stopped=true;return false}}else{return true}}})();
(function(){var c2x=NEJ.P,bc2x=NEJ.O,bs2x=NEJ.F,a1x=c2x("nej.e"),h2x=c2x("nej.v"),bb2x=c2x("nej.ui"),H2x=c2x("nej.ut"),k2x=c2x("nej.u"),l2x=c2x("nm.x"),q2x=c2x("nm.d"),x2x=c2x("nm.w"),b2x,L2x;x2x.yM1x=NEJ.C();b2x=x2x.yM1x.M2x(x2x.Wh7a);L2x=x2x.yM1x.cs3x;b2x.cy3x=function(){this.cG3x()};b2x.bX3x=function(){this.ch3x();var j2x=a1x.E2x(this.o2x,"j-flag");this.iq5v=j2x[0];this.ft4x.parent=j2x[1];this.cj3x.parent=j2x[2];this.cj3x.pager.parent=j2x[3]};b2x.ce3x=function(){this.cb3x="m-wgt-comment"};b2x.bo2x=function(e2x){this.bp2x(e2x);this.iq5v.innerText=e2x.commentCount||0}})();
(function(){var c2x=NEJ.P,fn4r=NEJ.R,a1x=c2x("nej.e"),h2x=c2x("nej.v"),k2x=c2x("nej.u"),H2x=c2x("nej.ut"),F2x=c2x("nm.m"),q2x=c2x("nm.d"),x2x=c2x("nm.w"),l2x=c2x("nm.x"),b2x,L2x;F2x.bTB1x=NEJ.C();b2x=F2x.bTB1x.M2x(F2x.dl3x);b2x.bJ3x=function(){this.bT3x();this.uN0x=q2x.iw5B.B2x({onitemadd:this.Au1x.eE4I(this,"success"),onerror:this.Au1x.eE4I(this,"error")});var sq9h=a1x.A2x("song-list-pre-cache");if(sq9h){this.gU5Z=x2x.AM1x.B2x({tpl:"m-wgt-song-rank-list",parent:sq9h,key:l2x.bJw8o(sq9h)})}this.ms6m=x2x.yM1x.B2x({restrict:this.gU5Z&&this.gU5Z.bdP0x(),parent:"comment-box",commentThreadId:a1x.t2x("comment-box","tid"),resourceUserId:a1x.t2x("comment-box","uid"),commentCount:a1x.t2x("comment-box","count"),onadd:this.pE8w.f2x(this),ondelete:this.pE8w.f2x(this)});h2x.s2x("toplist","click",this.bS3x.f2x(this));h2x.s2x(window,"share",this.bod2x.f2x(this));h2x.s2x(window,"playchange",this.cmo5t.f2x(this))};b2x.bS3x=function(d2x){var g2x=h2x.Z2x(d2x,"d:resAction"),W2x=a1x.t2x(g2x,"resAction"),D2x=a1x.t2x(g2x,"resId"),cml5q=a1x.t2x(g2x,"resData"),gy5D=a1x.t2x(g2x,"resType");switch(W2x){case"href":location.dispatch2("/discover/toplist?id="+D2x);break;case"comment":if(!l2x.gJ5O())break;if(this.gU5Z&&this.gU5Z.Gp3x(true)){}else{this.ms6m.nu7n()}break;case"share":if(!l2x.gJ5O())h2x.bg2x(d2x);if(this.gU5Z&&this.gU5Z.Gp3x(true)){h2x.bg2x(d2x)}break;case"download":if(this.gU5Z&&this.gU5Z.Gp3x(true,{download:true})){h2x.bg2x(d2x)}break;case"fav":if(g2x.className.indexOf("dis")!=-1)break;if(gy5D!=13)break;if(!l2x.gJ5O())break;if(this.gU5Z&&this.gU5Z.Gp3x(true)){h2x.bg2x(d2x)}else{a1x.w2x("toplist-fav","u-btni-fav-dis");a1x.A2x("toplist-fav").innerHTML="<i>收藏中...</i>";this.uN0x.jC5H({key:"playlist_fav-"+GUser.userId,data:{id:D2x,subscribedCount:cml5q,node:g2x}})}break}};b2x.Au1x=function(d2x,u2x){if(u2x=="success"){a1x.A2x("toplist-fav").innerHTML=l2x.wR0x(d2x.ext.subscribedCount,"已收藏")}else{a1x.A2x("toplist-fav").innerHTML=l2x.wR0x(d2x.ext.subscribedCount,"收藏");a1x.y2x("toplist-fav","u-btni-fav-dis")}};b2x.bod2x=function(d2x){if(d2x.rtype==13){var bK3x=a1x.A2x("toplist-share");bK3x.innerHTML=l2x.wR0x(parseInt(bK3x.innerText.replace(/\D/g,"")||0)+1,"分享")}};b2x.cmo5t=function(d2x){if(this.pV8N)a1x.y2x(this.pV8N,"ply-z-slt");this.pV8N=a1x.A2x("ply"+d2x.trackId);a1x.w2x(this.pV8N,"ply-z-slt")};b2x.pE8w=function(d2x){a1x.A2x("comment-count").innerText=d2x.total};a1x.cW3x("template-box");new F2x.bTB1x})()